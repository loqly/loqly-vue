(function(n,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(n=typeof globalThis<"u"?globalThis:n||self,l(n.LoqlyVue={},n.Vue))})(this,(function(n,l){"use strict";const c=async s=>{if(!s)throw new Error("API key is required");const t=window.location.href.includes("http://localhost")?"http://localhost:3000":"https://api.loqly.dev",e=await fetch(`${t}/v1/strings`,{method:"GET",headers:{Authorization:`Apikey ${s}`,"Content-Type":"application/json"}}),a=await e.json();if(!e.ok||a.error)throw new Error(a.error||"Something went wrong, please try again.");return a.strings?a.strings:{}};class u{constructor({apiKey:t,defaultLocale:e="en"}){this.apiKey=t,this._defaultLocale=e,this._locale=e,this._translations=null,this._translatableElements=[]}async init(){this._translations=await c(this.apiKey),this.cacheElements(),this.translateElements(this._translatableElements)}static async getTranslations(t){return await c(t)}t(t){var e,a,o,r;return((a=(e=this._translations)==null?void 0:e[t])==null?void 0:a[this._locale])||((r=(o=this._translations)==null?void 0:o[t])==null?void 0:r[this._defaultLocale])||t}cacheElements(){this._translatableElements=Array.from(document.querySelectorAll("[data-t]"))}translateElements(t){t.forEach(e=>{const a=e.getAttribute("data-t");a&&(e.textContent=this.t(a))})}translatePage(){this._translatableElements.length||this.cacheElements(),this.translateElements(this._translatableElements)}updateLanguage(t){this._locale=t,this.translatePage()}get translations(){return this._translations}set translations(t){this._translations=t}get locale(){return this._locale}set locale(t){this.updateLanguage(t)}get defaultLocale(){return this._defaultLocale}set defaultLocale(t){this._defaultLocale=t}}const i=l.reactive({locale:"en",translations:{}}),h=s=>{var e,a;return l.ref(((a=(e=i.translations)==null?void 0:e[s])==null?void 0:a[i.locale])??s).value},d=()=>{const s=l.getCurrentInstance();return{updateLanguage:e=>{i.locale=e,s.proxy.$forceUpdate()}}},f={install:(s,{apiKey:t="",translations:e={},defaultLocale:a="en",func:o="$t"}={})=>{t?u.getTranslations(t).then(r=>{i.translations=r}):e&&(i.translations=e),a&&(i.locale=a),s.config.globalProperties[o]=h}},g=u.getTranslations;n.default=f,n.getTranslations=g,n.translate=h,n.useLoqly=d,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
